spec:
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Descheduler is a description of a single descheduler instance
        properties:
          spec:
            description: Spec defines the behavior of a descheduler instance.
            properties:
              deploymentTemplate:
                description: Defines Template of a descedhuler Deployment
                properties:
                  nodeSelector: {}
                  resourcesRequests:
                    description: Политика распределения системных ресурсов для самого descheduler Deployment'а
                    properties:
                      mode:
                        description: Режим работы VPA для данного Deployment'а
                  tolerations: {}
              deschedulerPolicy:
                description: commonParameters and strategies полностью соответствуют документации https://github.com/kubernetes-sigs/descheduler#policy-and-strategies
                properties:
                  parameters:
                    description: Параметры, применяющиеся ко всем политикам
                    properties:
                      evictFailedBarePods:
                        description: EvictFailedBarePods позволяет подам ownerReferences в в failed фазе быть эвиктнутыми.
                      evictLocalStoragePods:
                        description: EvictLocalStoragePods позволяет подам с local storage быть эвиктнутыми.
                      evictSystemCriticalPods:
                        description: 'EvictSystemCriticalPods разрешает эвиктить поды с любым приоритетом (включая системные поды Kubernetes)
                          Внимание: включение опции полностью отключит priority filtering политики'
                      ignorePvcPods:
                        description: Отключает эвикт подов с PVC.
                      maxNoOfPodsToEvictPerNamespace:
                        description: MaxNoOfPodsToEvictPerNamespace ограничивает количество подов в отдельном Namespace, которые можно эвиктить одновременно.
                      maxNoOfPodsToEvictPerNode:
                        description: MaxNoOfPodsToEvictPerNamespace ограничивает количество подов на отдельной Node, которые можно эвиктить одновременно.
                      nodeSelector:
                        description: NodeSelector для нод, на поды которых буду действовать стратегии этого descheduler.
                    type: object
                  strategies:
                    description: 'Список стратегий и их параметров для этого Descheduler.
                      Чтобы применить стратегию, но не передавать ей каких-либо параметров, просто укажите её так:
                      removePodsViolatingNodeAffinity: {}'
                    properties:
                      highNodeUtilization:
                        properties:
                          nodeFit:
                            type: boolean
                          nodeResourceUtilizationThresholds:
                            properties:
                              numberOfNodes:
                                type: integer
                              targetThresholds:
                                additionalProperties:
                                  type: number
                                type: object
                              thresholds:
                                additionalProperties:
                                  type: number
                                type: object
                              useDeviationThresholds:
                                type: boolean
                            type: object
                        type: object
                      lowNodeUtilization:
                        properties:
                          nodeFit:
                            type: boolean
                          nodeResourceUtilizationThresholds:
                            properties:
                              numberOfNodes:
                                type: integer
                              targetThresholds:
                                additionalProperties:
                                  type: number
                                type: object
                              thresholds:
                                additionalProperties:
                                  type: number
                                type: object
                              useDeviationThresholds:
                                type: boolean
                            type: object
                        type: object
                      podLifeTime:
                        properties:
                          labelSelector:
                            description: A label selector is a label query over a
                              set of resources. The result of matchLabels and matchExpressions
                              are ANDed. An empty label selector matches all objects.
                              A null label selector matches no objects.
                            properties:
                              matchExpressions:
                                description: matchExpressions is a list of label selector
                                  requirements. The requirements are ANDed.
                                items:
                                  description: A label selector requirement is a selector
                                    that contains values, a key, and an operator that
                                    relates the key and values.
                                  properties:
                                    key:
                                      description: key is the label key that the selector
                                        applies to.
                                      type: string
                                    operator:
                                      description: operator represents a key's relationship
                                        to a set of values. Valid operators are In,
                                        NotIn, Exists and DoesNotExist.
                                      type: string
                                    values:
                                      description: values is an array of string values.
                                        If the operator is In or NotIn, the values
                                        array must be non-empty. If the operator is
                                        Exists or DoesNotExist, the values array must
                                        be empty. This array is replaced during a
                                        strategic merge patch.
                                      items:
                                        type: string
                                      type: array
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                              matchLabels:
                                additionalProperties:
                                  type: string
                                description: matchLabels is a map of {key,value} pairs.
                                  A single {key,value} in the matchLabels map is equivalent
                                  to an element of matchExpressions, whose key field
                                  is "key", the operator is "In", and the values array
                                  contains only "value". The requirements are ANDed.
                                type: object
                            type: object
                          namespaces:
                            properties:
                              exclude:
                                items:
                                  type: string
                                type: array
                              include:
                                items:
                                  type: string
                                type: array
                            required:
                            - exclude
                            - include
                            type: object
                          podLifeTime:
                            properties:
                              maxPodLifeTimeSeconds:
                                type: integer
                              podStatusPhases:
                                items:
                                  type: string
                                type: array
                            type: object
                          thresholdPriority:
                            format: int32
                            type: integer
                          thresholdPriorityClassName:
                            type: string
                        required:
                        - thresholdPriority
                        - thresholdPriorityClassName
                        type: object
                      removeDuplicates:
                        properties:
                          namespaces:
                            properties:
                              exclude:
                                items:
                                  type: string
                                type: array
                              include:
                                items:
                                  type: string
                                type: array
                            required:
                            - exclude
                            - include
                            type: object
                          nodeFit:
                            type: boolean
                          removeDuplicates:
                            properties:
                              excludeOwnerKinds:
                                items:
                                  type: string
                                type: array
                            type: object
                          thresholdPriority:
                            format: int32
                            type: integer
                          thresholdPriorityClassName:
                            type: string
                        required:
                        - thresholdPriority
                        - thresholdPriorityClassName
                        type: object
                      removeFailedPods:
                        properties:
                          labelSelector:
                            description: A label selector is a label query over a
                              set of resources. The result of matchLabels and matchExpressions
                              are ANDed. An empty label selector matches all objects.
                              A null label selector matches no objects.
                            properties:
                              matchExpressions:
                                description: matchExpressions is a list of label selector
                                  requirements. The requirements are ANDed.
                                items:
                                  description: A label selector requirement is a selector
                                    that contains values, a key, and an operator that
                                    relates the key and values.
                                  properties:
                                    key:
                                      description: key is the label key that the selector
                                        applies to.
                                      type: string
                                    operator:
                                      description: operator represents a key's relationship
                                        to a set of values. Valid operators are In,
                                        NotIn, Exists and DoesNotExist.
                                      type: string
                                    values:
                                      description: values is an array of string values.
                                        If the operator is In or NotIn, the values
                                        array must be non-empty. If the operator is
                                        Exists or DoesNotExist, the values array must
                                        be empty. This array is replaced during a
                                        strategic merge patch.
                                      items:
                                        type: string
                                      type: array
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                              matchLabels:
                                additionalProperties:
                                  type: string
                                description: matchLabels is a map of {key,value} pairs.
                                  A single {key,value} in the matchLabels map is equivalent
                                  to an element of matchExpressions, whose key field
                                  is "key", the operator is "In", and the values array
                                  contains only "value". The requirements are ANDed.
                                type: object
                            type: object
                          namespaces:
                            properties:
                              exclude:
                                items:
                                  type: string
                                type: array
                              include:
                                items:
                                  type: string
                                type: array
                            required:
                            - exclude
                            - include
                            type: object
                          nodeFit:
                            type: boolean
                          removeFailedPods:
                            properties:
                              excludeOwnerKinds:
                                items:
                                  type: string
                                type: array
                              includingInitContainers:
                                type: boolean
                              minPodLifetimeSeconds:
                                type: integer
                              reasons:
                                items:
                                  type: string
                                type: array
                            type: object
                          thresholdPriority:
                            format: int32
                            type: integer
                          thresholdPriorityClassName:
                            type: string
                        required:
                        - thresholdPriority
                        - thresholdPriorityClassName
                        type: object
                      removePodsHavingTooManyRestarts:
                        properties:
                          labelSelector:
                            description: A label selector is a label query over a
                              set of resources. The result of matchLabels and matchExpressions
                              are ANDed. An empty label selector matches all objects.
                              A null label selector matches no objects.
                            properties:
                              matchExpressions:
                                description: matchExpressions is a list of label selector
                                  requirements. The requirements are ANDed.
                                items:
                                  description: A label selector requirement is a selector
                                    that contains values, a key, and an operator that
                                    relates the key and values.
                                  properties:
                                    key:
                                      description: key is the label key that the selector
                                        applies to.
                                      type: string
                                    operator:
                                      description: operator represents a key's relationship
                                        to a set of values. Valid operators are In,
                                        NotIn, Exists and DoesNotExist.
                                      type: string
                                    values:
                                      description: values is an array of string values.
                                        If the operator is In or NotIn, the values
                                        array must be non-empty. If the operator is
                                        Exists or DoesNotExist, the values array must
                                        be empty. This array is replaced during a
                                        strategic merge patch.
                                      items:
                                        type: string
                                      type: array
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                              matchLabels:
                                additionalProperties:
                                  type: string
                                description: matchLabels is a map of {key,value} pairs.
                                  A single {key,value} in the matchLabels map is equivalent
                                  to an element of matchExpressions, whose key field
                                  is "key", the operator is "In", and the values array
                                  contains only "value". The requirements are ANDed.
                                type: object
                            type: object
                          namespaces:
                            properties:
                              exclude:
                                items:
                                  type: string
                                type: array
                              include:
                                items:
                                  type: string
                                type: array
                            required:
                            - exclude
                            - include
                            type: object
                          nodeFit:
                            type: boolean
                          podsHavingTooManyRestarts:
                            properties:
                              includingInitContainers:
                                type: boolean
                              podRestartThreshold:
                                format: int32
                                type: integer
                            type: object
                          thresholdPriority:
                            format: int32
                            type: integer
                          thresholdPriorityClassName:
                            type: string
                        required:
                        - thresholdPriority
                        - thresholdPriorityClassName
                        type: object
                      removePodsViolatingInterPodAntiAffinity:
                        properties:
                          labelSelector:
                            description: A label selector is a label query over a
                              set of resources. The result of matchLabels and matchExpressions
                              are ANDed. An empty label selector matches all objects.
                              A null label selector matches no objects.
                            properties:
                              matchExpressions:
                                description: matchExpressions is a list of label selector
                                  requirements. The requirements are ANDed.
                                items:
                                  description: A label selector requirement is a selector
                                    that contains values, a key, and an operator that
                                    relates the key and values.
                                  properties:
                                    key:
                                      description: key is the label key that the selector
                                        applies to.
                                      type: string
                                    operator:
                                      description: operator represents a key's relationship
                                        to a set of values. Valid operators are In,
                                        NotIn, Exists and DoesNotExist.
                                      type: string
                                    values:
                                      description: values is an array of string values.
                                        If the operator is In or NotIn, the values
                                        array must be non-empty. If the operator is
                                        Exists or DoesNotExist, the values array must
                                        be empty. This array is replaced during a
                                        strategic merge patch.
                                      items:
                                        type: string
                                      type: array
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                              matchLabels:
                                additionalProperties:
                                  type: string
                                description: matchLabels is a map of {key,value} pairs.
                                  A single {key,value} in the matchLabels map is equivalent
                                  to an element of matchExpressions, whose key field
                                  is "key", the operator is "In", and the values array
                                  contains only "value". The requirements are ANDed.
                                type: object
                            type: object
                          namespaces:
                            properties:
                              exclude:
                                items:
                                  type: string
                                type: array
                              include:
                                items:
                                  type: string
                                type: array
                            required:
                            - exclude
                            - include
                            type: object
                          nodeFit:
                            type: boolean
                          thresholdPriority:
                            format: int32
                            type: integer
                          thresholdPriorityClassName:
                            type: string
                        required:
                        - thresholdPriority
                        - thresholdPriorityClassName
                        type: object
                      removePodsViolatingNodeAffinity:
                        properties:
                          labelSelector:
                            description: A label selector is a label query over a
                              set of resources. The result of matchLabels and matchExpressions
                              are ANDed. An empty label selector matches all objects.
                              A null label selector matches no objects.
                            properties:
                              matchExpressions:
                                description: matchExpressions is a list of label selector
                                  requirements. The requirements are ANDed.
                                items:
                                  description: A label selector requirement is a selector
                                    that contains values, a key, and an operator that
                                    relates the key and values.
                                  properties:
                                    key:
                                      description: key is the label key that the selector
                                        applies to.
                                      type: string
                                    operator:
                                      description: operator represents a key's relationship
                                        to a set of values. Valid operators are In,
                                        NotIn, Exists and DoesNotExist.
                                      type: string
                                    values:
                                      description: values is an array of string values.
                                        If the operator is In or NotIn, the values
                                        array must be non-empty. If the operator is
                                        Exists or DoesNotExist, the values array must
                                        be empty. This array is replaced during a
                                        strategic merge patch.
                                      items:
                                        type: string
                                      type: array
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                              matchLabels:
                                additionalProperties:
                                  type: string
                                description: matchLabels is a map of {key,value} pairs.
                                  A single {key,value} in the matchLabels map is equivalent
                                  to an element of matchExpressions, whose key field
                                  is "key", the operator is "In", and the values array
                                  contains only "value". The requirements are ANDed.
                                type: object
                            type: object
                          namespaces:
                            properties:
                              exclude:
                                items:
                                  type: string
                                type: array
                              include:
                                items:
                                  type: string
                                type: array
                            required:
                            - exclude
                            - include
                            type: object
                          nodeAffinityType:
                            items:
                              type: string
                            type: array
                          nodeFit:
                            type: boolean
                          thresholdPriority:
                            format: int32
                            type: integer
                          thresholdPriorityClassName:
                            type: string
                        required:
                        - thresholdPriority
                        - thresholdPriorityClassName
                        type: object
                      removePodsViolatingNodeTaints:
                        properties:
                          excludedTaints:
                            items:
                              type: string
                            type: array
                          labelSelector:
                            description: A label selector is a label query over a
                              set of resources. The result of matchLabels and matchExpressions
                              are ANDed. An empty label selector matches all objects.
                              A null label selector matches no objects.
                            properties:
                              matchExpressions:
                                description: matchExpressions is a list of label selector
                                  requirements. The requirements are ANDed.
                                items:
                                  description: A label selector requirement is a selector
                                    that contains values, a key, and an operator that
                                    relates the key and values.
                                  properties:
                                    key:
                                      description: key is the label key that the selector
                                        applies to.
                                      type: string
                                    operator:
                                      description: operator represents a key's relationship
                                        to a set of values. Valid operators are In,
                                        NotIn, Exists and DoesNotExist.
                                      type: string
                                    values:
                                      description: values is an array of string values.
                                        If the operator is In or NotIn, the values
                                        array must be non-empty. If the operator is
                                        Exists or DoesNotExist, the values array must
                                        be empty. This array is replaced during a
                                        strategic merge patch.
                                      items:
                                        type: string
                                      type: array
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                              matchLabels:
                                additionalProperties:
                                  type: string
                                description: matchLabels is a map of {key,value} pairs.
                                  A single {key,value} in the matchLabels map is equivalent
                                  to an element of matchExpressions, whose key field
                                  is "key", the operator is "In", and the values array
                                  contains only "value". The requirements are ANDed.
                                type: object
                            type: object
                          namespaces:
                            properties:
                              exclude:
                                items:
                                  type: string
                                type: array
                              include:
                                items:
                                  type: string
                                type: array
                            required:
                            - exclude
                            - include
                            type: object
                          nodeFit:
                            type: boolean
                          thresholdPriority:
                            format: int32
                            type: integer
                          thresholdPriorityClassName:
                            type: string
                        required:
                        - thresholdPriority
                        - thresholdPriorityClassName
                        type: object
                      removePodsViolatingTopologySpreadConstraint:
                        properties:
                          includeSoftConstraints:
                            type: boolean
                          labelSelector:
                            description: A label selector is a label query over a
                              set of resources. The result of matchLabels and matchExpressions
                              are ANDed. An empty label selector matches all objects.
                              A null label selector matches no objects.
                            properties:
                              matchExpressions:
                                description: matchExpressions is a list of label selector
                                  requirements. The requirements are ANDed.
                                items:
                                  description: A label selector requirement is a selector
                                    that contains values, a key, and an operator that
                                    relates the key and values.
                                  properties:
                                    key:
                                      description: key is the label key that the selector
                                        applies to.
                                      type: string
                                    operator:
                                      description: operator represents a key's relationship
                                        to a set of values. Valid operators are In,
                                        NotIn, Exists and DoesNotExist.
                                      type: string
                                    values:
                                      description: values is an array of string values.
                                        If the operator is In or NotIn, the values
                                        array must be non-empty. If the operator is
                                        Exists or DoesNotExist, the values array must
                                        be empty. This array is replaced during a
                                        strategic merge patch.
                                      items:
                                        type: string
                                      type: array
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                              matchLabels:
                                additionalProperties:
                                  type: string
                                description: matchLabels is a map of {key,value} pairs.
                                  A single {key,value} in the matchLabels map is equivalent
                                  to an element of matchExpressions, whose key field
                                  is "key", the operator is "In", and the values array
                                  contains only "value". The requirements are ANDed.
                                type: object
                            type: object
                          namespaces:
                            properties:
                              exclude:
                                items:
                                  type: string
                                type: array
                              include:
                                items:
                                  type: string
                                type: array
                            required:
                            - exclude
                            - include
                            type: object
                          nodeFit:
                            type: boolean
                          thresholdPriority:
                            format: int32
                            type: integer
                          thresholdPriorityClassName:
                            type: string
                        required:
                        - includeSoftConstraints
                        - thresholdPriority
                        - thresholdPriorityClassName
                        type: object
                    type: object
                type: object
            type: object
          status:
            description: Последний известный статус descheduler Deployment'а
            properties:
              ready:
                type: boolean
            required:
            - ready
            type: object
