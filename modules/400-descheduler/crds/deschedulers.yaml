---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.8.0
  creationTimestamp: null
  name: deschedulers.deckhouse.io
spec:
  group: deckhouse.io
  names:
    kind: Descheduler
    listKind: DeschedulerList
    plural: deschedulers
    singular: descheduler
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - jsonPath: status.ready
      name: Ready
      type: boolean
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Descheduler is a description of a single descheduler instance
        properties:
          apiVersion:
            type: string
          kind:
            type: string
          metadata:
            type: object
          spec:
            description: Spec defines the behavior of a descheduler instance.
            properties:
              deploymentTemplate:
                description: Defines Template of a descedhuler Deployment
                properties:
                  nodeSelector:
                    additionalProperties:
                      type: string
                    description: 'NodeSelector is a selector which must be true for
                      the pod to fit on a node. Selector which must match a node''s
                      labels for the pod to be scheduled on that node. More info:
                      https://kubernetes.io/docs/concepts/configuration/assign-pod-node/'
                    type: object
                  resourcesRequests:
                    description: Resource allocation policy
                    properties:
                      mode:
                        default: VPA
                        description: Defines VPA mode that applies to a given descheduler
                          Deployment
                        enum:
                        - Manual
                        - VPA
                        - "Off"
                        type: string
                    type: object
                  tolerations:
                    description: If specified, the pod's tolerations.
                    items:
                      properties:
                        effect:
                          type: string
                        key:
                          type: string
                        operator:
                            category.
                          type: string
                        tolerationSeconds:
                          format: int64
                          type: integer
                        value:
                          type: string
                      type: object
                    type: array
                type: object
              deschedulerPolicy:
                description: commonParameters and strategies follow descheduler's
                  documentation https://github.com/kubernetes-sigs/descheduler#policy-and-strategies
                properties:
                  parameters:
                    description: Parameters that apply to all policies
                    properties:
                      evictFailedBarePods:
                        description: EvictFailedBarePods allows pods without ownerReferences
                          and in failed phase to be evicted.
                        type: boolean
                      evictLocalStoragePods:
                        description: EvictLocalStoragePods allows pods using local
                          storage to be evicted.
                        type: boolean
                      evictSystemCriticalPods:
                        description: 'EvictSystemCriticalPods allows eviction of pods
                          of any priority (including Kubernetes system pods) Note:
                          Setting evictSystemCriticalPods to true disables priority
                          filtering entirely.'
                        type: boolean
                      ignorePvcPods:
                        description: IgnorePVCPods prevents pods with PVCs from being
                          evicted.
                        type: boolean
                      maxNoOfPodsToEvictPerNamespace:
                        description: MaxNoOfPodsToEvictPerNamespace restricts maximum
                          of pods to be evicted per namespace.
                        type: integer
                      maxNoOfPodsToEvictPerNode:
                        description: MaxNoOfPodsToEvictPerNode restricts maximum of
                          pods to be evicted per node.
                        type: integer
                      nodeSelector:
                        description: NodeSelector for a set of nodes to operate over
                        type: string
                    type: object
                  strategies:
                    description: 'List of strategies with corresponding parameters
                      for a given Descheduler instances To enable a strategy without
                      giving it any parameters, specify it like this: removePodsViolatingNodeAffinity:
                      {}'
                    properties:
                      highNodeUtilization:
                        properties:
                          nodeFit:
                            type: boolean
                          nodeResourceUtilizationThresholds:
                            properties:
                              numberOfNodes:
                                type: integer
                              targetThresholds:
                                additionalProperties:
                                  type: number
                                type: object
                              thresholds:
                                additionalProperties:
                                  type: number
                                type: object
                              useDeviationThresholds:
                                type: boolean
                            type: object
                        type: object
                      lowNodeUtilization:
                        properties:
                          nodeFit:
                            type: boolean
                          nodeResourceUtilizationThresholds:
                            properties:
                              numberOfNodes:
                                type: integer
                              targetThresholds:
                                additionalProperties:
                                  type: number
                                type: object
                              thresholds:
                                additionalProperties:
                                  type: number
                                type: object
                              useDeviationThresholds:
                                type: boolean
                            type: object
                        type: object
                      podLifeTime:
                        properties:
                          labelSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      type: string
                                    values:
                                      items:
                                        type: string
                                      type: array
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                              matchLabels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          namespaces:
                            properties:
                              exclude:
                                items:
                                  type: string
                                type: array
                              include:
                                items:
                                  type: string
                                type: array
                            required:
                            - exclude
                            - include
                            type: object
                          podLifeTime:
                            properties:
                              maxPodLifeTimeSeconds:
                                type: integer
                              podStatusPhases:
                                items:
                                  type: string
                                type: array
                            type: object
                          thresholdPriority:
                            format: int32
                            type: integer
                          thresholdPriorityClassName:
                            type: string
                        required:
                        - thresholdPriority
                        - thresholdPriorityClassName
                        type: object
                      removeDuplicates:
                        properties:
                          namespaces:
                            properties:
                              exclude:
                                items:
                                  type: string
                                type: array
                              include:
                                items:
                                  type: string
                                type: array
                            required:
                            - exclude
                            - include
                            type: object
                          nodeFit:
                            type: boolean
                          removeDuplicates:
                            properties:
                              excludeOwnerKinds:
                                items:
                                  type: string
                                type: array
                            type: object
                          thresholdPriority:
                            format: int32
                            type: integer
                          thresholdPriorityClassName:
                            type: string
                        required:
                        - thresholdPriority
                        - thresholdPriorityClassName
                        type: object
                      removeFailedPods:
                        properties:
                          labelSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      description: key is the label key that the selector
                                        applies to.
                                      type: string
                                    operator:
                                      type: string
                                    values:
                                      items:
                                        type: string
                                      type: array
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                              matchLabels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          namespaces:
                            properties:
                              exclude:
                                items:
                                  type: string
                                type: array
                              include:
                                items:
                                  type: string
                                type: array
                            required:
                            - exclude
                            - include
                            type: object
                          nodeFit:
                            type: boolean
                          removeFailedPods:
                            properties:
                              excludeOwnerKinds:
                                items:
                                  type: string
                                type: array
                              includingInitContainers:
                                type: boolean
                              minPodLifetimeSeconds:
                                type: integer
                              reasons:
                                items:
                                  type: string
                                type: array
                            type: object
                          thresholdPriority:
                            format: int32
                            type: integer
                          thresholdPriorityClassName:
                            type: string
                        required:
                        - thresholdPriority
                        - thresholdPriorityClassName
                        type: object
                      removePodsHavingTooManyRestarts:
                        properties:
                          labelSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      type: string
                                    values:
                                      items:
                                        type: string
                                      type: array
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                              matchLabels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          namespaces:
                            properties:
                              exclude:
                                items:
                                  type: string
                                type: array
                              include:
                                items:
                                  type: string
                                type: array
                            required:
                            - exclude
                            - include
                            type: object
                          nodeFit:
                            type: boolean
                          podsHavingTooManyRestarts:
                            properties:
                              includingInitContainers:
                                type: boolean
                              podRestartThreshold:
                                format: int32
                                type: integer
                            type: object
                          thresholdPriority:
                            format: int32
                            type: integer
                          thresholdPriorityClassName:
                            type: string
                        required:
                        - thresholdPriority
                        - thresholdPriorityClassName
                        type: object
                      removePodsViolatingInterPodAntiAffinity:
                        properties:
                          labelSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      type: string
                                    values:
                                      items:
                                        type: string
                                      type: array
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                              matchLabels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          namespaces:
                            properties:
                              exclude:
                                items:
                                  type: string
                                type: array
                              include:
                                items:
                                  type: string
                                type: array
                            required:
                            - exclude
                            - include
                            type: object
                          nodeFit:
                            type: boolean
                          thresholdPriority:
                            format: int32
                            type: integer
                          thresholdPriorityClassName:
                            type: string
                        required:
                        - thresholdPriority
                        - thresholdPriorityClassName
                        type: object
                      removePodsViolatingNodeAffinity:
                        properties:
                          labelSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      type: string
                                    values:
                                      items:
                                        type: string
                                      type: array
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                              matchLabels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          namespaces:
                            properties:
                              exclude:
                                items:
                                  type: string
                                type: array
                              include:
                                items:
                                  type: string
                                type: array
                            required:
                            - exclude
                            - include
                            type: object
                          nodeAffinityType:
                            items:
                              type: string
                            type: array
                          nodeFit:
                            type: boolean
                          thresholdPriority:
                            format: int32
                            type: integer
                          thresholdPriorityClassName:
                            type: string
                        required:
                        - thresholdPriority
                        - thresholdPriorityClassName
                        type: object
                      removePodsViolatingNodeTaints:
                        properties:
                          excludedTaints:
                            items:
                              type: string
                            type: array
                          labelSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      type: string
                                    values:
                                      items:
                                        type: string
                                      type: array
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                              matchLabels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          namespaces:
                            properties:
                              exclude:
                                items:
                                  type: string
                                type: array
                              include:
                                items:
                                  type: string
                                type: array
                            required:
                            - exclude
                            - include
                            type: object
                          nodeFit:
                            type: boolean
                          thresholdPriority:
                            format: int32
                            type: integer
                          thresholdPriorityClassName:
                            type: string
                        required:
                        - thresholdPriority
                        - thresholdPriorityClassName
                        type: object
                      removePodsViolatingTopologySpreadConstraint:
                        properties:
                          includeSoftConstraints:
                            type: boolean
                          labelSelector:
                            properties:
                              matchExpressions:
                                items:
                                  properties:
                                    key:
                                      type: string
                                    operator:
                                      type: string
                                    values:
                                      items:
                                        type: string
                                      type: array
                                  required:
                                  - key
                                  - operator
                                  type: object
                                type: array
                              matchLabels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          namespaces:
                            properties:
                              exclude:
                                items:
                                  type: string
                                type: array
                              include:
                                items:
                                  type: string
                                type: array
                            required:
                            - exclude
                            - include
                            type: object
                          nodeFit:
                            type: boolean
                          thresholdPriority:
                            format: int32
                            type: integer
                          thresholdPriorityClassName:
                            type: string
                        required:
                        - includeSoftConstraints
                        - thresholdPriority
                        - thresholdPriorityClassName
                        type: object
                    type: object
                type: object
            type: object
          status:
            description: Most recently observed status of a descheduler instance.
            properties:
              ready:
                type: boolean
            required:
            - ready
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
